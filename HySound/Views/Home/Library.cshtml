@using HySound.ViewModels.Main
@model LibraryViewModel

<div class="library-container">
    <aside class="library-sidebar">
        <ul class="library-nav">
            <li id="favourites-option" class="active"><i class="fas fa-heart"></i></li>
            <li id="playlists-option"><i class="fas fa-music"></i></li>
            <li id="albums-option"><i class="fas fa-compact-disc"></i></li>
            <li id="tracklist-option"><i class="fas fa-list"></i></li>
        </ul>
    </aside>

    <section class="library-content">
        <h1 id="library-title" class="library-title">My Library</h1>

        <div id="favourites-content" class="library-grid">
            @if(Model.Tracks != null)
            {
                @foreach(var track in Model.Tracks)
                {
                <div class="library-track-card">
                    <img src="~/Images/@track.ImageLink" alt="Track Image" class="library-track-img">
                    <div class="library-track-info">
                        <h3 class="library-track-title">@track.Title</h3>
                        <p class="library-track-artist">@track.UserName</p>
                        <div class="library-track-actions">
                            <button class="track-btn"><i class="fas fa-play"></i></button>
                            <a asp-controller="Like" asp-action="Dislike" asp-route-id="@track.TrackId" class="track-btn unlike-btn"><i class="fas fa-heart-broken"></i></a>
                        </div>
                    </div>
                </div>
                }
            }
        </div>

        <div id="playlists-content" class="library-grid" style="display: none;">
            @if(Model.Playlists!=null)
            {
                @foreach(var playlist in Model.Playlists)
                {
                <div class="library-track-card">
                    <img src="~/Images/@playlist" alt="Track Image" class="library-track-img">
                    <div class="library-track-info">
                        <h3 class="library-track-title">@playlist.Title</h3>
                        <p class="library-track-artist">@playlist.UserId</p>
                        <div class="library-track-actions">
                            <button class="track-btn"><i class="fas fa-play"></i></button>
                            <button class="track-btn unlike-btn"><i class="fas fa-heart-broken"></i></button>
                        </div>
                    </div>
                </div>
                }
            }
        </div>
        
        <div id="albums-content" class="library-grid" style="display: none;">
            @if(Model.Albums != null)
            {
                @foreach(var album in Model.Albums)
                {
                <div class="library-track-card">
                    <img src="~/Images/@album.CoverImage" alt="Track Image" class="library-track-img">
                    <div class="library-track-info">
                        <h3 class="library-track-title">@album.Title</h3>
                        <p class="library-track-artist">@album.UserName</p>
                        <div class="library-track-actions">
                            <button class="track-btn"><i class="fas fa-play"></i></button>
                            <button class="track-btn unlike-btn"><i class="fas fa-heart-broken"></i></button>
                        </div>
                    </div>
                </div>
                }
            }
        </div>

        <div id="tracklist-content" class="library-grid" style="display: none;">
            <div class="library-track-card">
                <img src="~/Images/wlr.jpg" alt="Track Image" class="library-track-img">
                <div class="library-track-info">
                    <h3 class="library-track-title">Whole Lotta Red</h3>
                    <p class="library-track-artist">Playboi Carti</p>
                    <div class="library-track-actions">
                        <button class="track-btn"><i class="fas fa-play"></i></button>
                        <button class="track-btn unlike-btn"><i class="fas fa-heart-broken"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<script>
    document.getElementById('favourites-option').addEventListener('click', function () {
        toggleContent('favourites');
        updateTitle('Favourites');
        updateActiveState('favourites');
    });
    document.getElementById('playlists-option').addEventListener('click', function () {
        toggleContent('playlists');
        updateTitle('Playlists');
        updateActiveState('playlists');
    });
    document.getElementById('albums-option').addEventListener('click', function () {
        toggleContent('albums');
        updateTitle('Albums');
        updateActiveState('albums');
    });
    document.getElementById('tracklist-option').addEventListener('click', function () {
        toggleContent('tracklist');
        updateTitle('Tracklist');
        updateActiveState('tracklist');
    });

    function toggleContent(content) {
        // Hide all content
        document.getElementById('favourites-content').style.display = 'none';
        document.getElementById('playlists-content').style.display = 'none';
        document.getElementById('albums-content').style.display = 'none';
        document.getElementById('tracklist-content').style.display = 'none';

        // Show selected content
        if (content === 'favourites') {
            document.getElementById('favourites-content').style.display = 'grid';
        } else if (content === 'playlists') {
            document.getElementById('playlists-content').style.display = 'grid';
        } else if (content === 'albums') {
            document.getElementById('albums-content').style.display = 'grid';
        } else if (content === 'tracklist') {
            document.getElementById('tracklist-content').style.display = 'grid';
        }
    }

    function updateTitle(title) {
        document.getElementById('library-title').textContent = title;
    }

    function updateActiveState(option) {
        const navItems = document.querySelectorAll('.library-nav li');
        navItems.forEach(item => item.classList.remove('active'));

        document.getElementById(option + '-option').classList.add('active');
    }
</script>
